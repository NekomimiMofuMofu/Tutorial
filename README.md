# Tutorial -Git チュートリアル-
gitの基本的な使い方をマスターしよう
コマンドが一杯出てくるけど、基本的にGUIツールを使うので全部覚える必要は無し

# Gitをインストールしよう
https://git-scm.com/downloads

ここからWindows用のgitクライアントをダウンロードしてインストール

https://qiita.com/manabu-watanabe/items/ecf1b434baf305adaa00

ここを参考にしてインストール

# 初期設定

完了したらGitBashを起動しましょう(デスクトップで右クリック->Git Bash Here)
![スクリーンショット 2020-10-21 173229](https://user-images.githubusercontent.com/15999897/96694414-6a6cd580-13c3-11eb-8896-4ac45e6b57c4.png)

そしたらいつもの黒い画面が開きます。

ちなみにこれはWindowsのコマンドプロンプトでは無く、Bashです

そしたら以下のコマンドを上から順に実行していきましょう

`git config --global user.name "githubに登録したユーザー名"`

`git config --global user.email "githubに登録したメールアドレス"`

`git config --global core.quotepath false`

これでgitの初期設定は完了

# 公開鍵・秘密鍵生成

次にgithubとssh接続するために公開鍵、秘密鍵を生成します。

同じくさっきのbashで作業していきます。

`mkdir ~/.ssh`

`cd ~/.ssh`

`ssh-keygen -t rsa -C 'githubに登録したメールアドレス'`

そしてEnterを3回押します。
(keyを生成するかの応答、パスフレーズ(空だと無し)、確認パスフレーズ(同じく空))

そして公開鍵を確認します。

`cat ~/.ssh/id_rsa.pub` (この際 id_rsaファイルは秘密鍵になるので絶対に公開しないこと)

`ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQDjG108faFBVVKvsWqHwu2PtSW4Xfufwb52MAo7uYaT/XsMrAXNnUDnWbjzcXq+2kJWjmpZQ6l+j1YIwGyyupYx4CBL/Sel366kj81naTRDHRrlaaXr7jaPTVuWtDrRvMmJqB3zm9A4Mp819xD8HbtJGiJRIs2sgGABcC6KQLVjAgGkXSeYfEAFUVRJc6kH8s5PH26r2ORUby4/HeWXdEsHXS4wklCgmoD1PCL8GocoOW6mmwAOEGL8uuoQC4Hq5Mlhk90oTkwD7JhOUC3WODBif8CSOHMlOY5qaLf8LIEdFup1cdA1dazYJyRkPyhYQlI3wyyksJMIH0LhzNI2/fMLTMOyMHrFsZwckf+Xx1tOeQZiUMNIFZZOehjV0r1PhG5n+4BAkErm63zawybrGDXFM6dBjYUPkoJUuK6i6IY7YktlkkS9/flYfT/Sxdti5fnpPRaO+xqIIyl1Ble6wcW82SxAYkBy24r5HbKEH5Zvey7fTvw9sp3fsLKiJizLlfM= rusuke@t-net.ne.jp`

こんな感じで長いのが出てくるのでコピー

そしてDiscordの公開鍵に貼り付け


## githubに公開鍵を登録

さらに公開鍵をgithubに登録します。
1 Githubの右上メニューからSettingを選択

![スクリーンショット 2020-10-21 175013](https://user-images.githubusercontent.com/15999897/96696772-1fa08d00-13c6-11eb-83d2-9fb6f5624e96.png)

2 左の SSH and GPG keys を選択

![スクリーンショット 2020-10-21 175040](https://user-images.githubusercontent.com/15999897/96696777-20392380-13c6-11eb-844e-5388faa9c79f.png)

3 New SSH Keyを押す

![スクリーンショット 2020-10-21 175100](https://user-images.githubusercontent.com/15999897/96696783-216a5080-13c6-11eb-9194-3b4e535ed572.png)

4 Title 分かりやすい名前、Key さっきコピーしたキーを貼り付けて Add SSH keyを押す

![スクリーンショット 2020-10-21 175144](https://user-images.githubusercontent.com/15999897/96696796-24fdd780-13c6-11eb-9a77-73f4ec77af55.png)

これで登録されます。

これで一通り設定は完了です。

# このリポジトリをクローンしよう

このリポジトリを自分のPCへダウンロード(複製します)

PCに何も無い状態でダウンロードすることをクローン(clone)と言います

リポジトリを起きたいディレクトリを作成して(MyDocumentにSchoolProjectみたいなディレクトリを作っておきましょう(なるべくパスに日本語を含まないように))

作成したディレクトリをエクスプローラーで開き、エクスプローラー上で右クリック。

デスクトップと同じようにGit Bash Here が出てくるのでクリック。

こうすることでカレントディレクトリをそのディレクトリとして開けます。

`git clone git@github.com:NekomimiMofuMofu/Tutorial.git`

と実行

もし鍵作成時にパスフレーズを登録していればこの段階で聞かれるので入力

`Are you sure you want to continue connecting (yes/no/[fingerprint])?`

と出てきたら`yes`と入力してEnter

そうするとクローンが始まります。

そしたらエクスプローラーにフォルダが作成されていて、このREADME.md ファイルがあればクローン成功です。

## リポジトリのpull
gitのリポジトリはcloneした時点で、githubサーバー(リモートリポジトリ)と、各自のPC内(ローカルリポジトリ)に別々に存在することになる。

リモートリポジトリが変更した際にその変更を自分のPCに持ってくることをpullコマンドで行える。

`git pull`

コマンドを実行することでpullが可能

# ファイルを追加しよう

まずリポジトリ内に自分のファイルを追加しよう。

リポジトリをクローンしたディレクトリ(`README.md`ファイルがあるディレクトリ)に自分の名前のディレクトリを作成しよう。

これよりリポジトリをクローンしたディレクトリを`@`としてパスに表記するよ

僕の環境では `E:\Users\Raiti\Document\School`にクローンしたので`@\Tutorial\Raiti\test.txt`は`E:\Users\Raiti\Document\School\Project\Tutorial\Raiti\test\txt`を指すことになるよ

その中に`test.txt`というテキストファイルでも作って中身も適当に書き込もう。`@\Tutorial\各自名前\test.txt`

特に内容思いつかなきゃ`hogehoge`とでも書いておいて

そしたら`@\Tutorial\`をエクスプローラーで開いて右クリックでいつもの黒いGitBashを開いて

`git add ./各自名前/test.txt` 

を実行

これでさっき作成したファイルがリポジトリ管理に追加されたよ。

ちなみに、

`git add *`

と実行するとリポジトリ内のフォルダにある全てのファイル

`git add ./各自名前/*`

と実行すると指定されたディレクトリ以下にあるすべてのファイル

がリポジトリ管理に追加されるよ。(ただし`git add` は管理に追加以外に機能があるからおすすめはしない

# コミットしよう

`git commit -m "コミットメッセージ"`

でコミットができるよ

コミットメッセージを

> (自分の名前)の初めてのコミット

としてコミットしてみよう。

コミットメッセージは日本語でもOK

こうすることでファイルを変更した履歴を残せる

逆に、過去のコミットに戻すこともできるので、変更してバグが生まれた!!

となっても戻せるから安心!

# プッシュしよう

さっきコミットしたけど、これはあくまでも、ローカル(自分のPC内)にしか記録されていない

リモート(サーバー側)の方には記録されてないから、その記録を送信してあげる必要がある

`git clone` PC内に何もない状態で新しくリポジトリをサーバーから取ってくる

`git pull` PC内にブランチがある状態でサーバー側の最新の状態に更新する

がサーバーとのやり取りであったけどもう一つ

`git push` ローカルでの変更をサーバー側にアップロードする。

コマンドがある

`git push origin master`

と実行してみよう。

これでコミットした内容がサーバーにアップロードされた。

# ブランチを切ろう

リポジトリはサーバー側とローカルに存在し、常に同期(同じ状態)というわけではない、

コミットという単位で変更をしていくのだがもしコミットで矛盾が起きたらどうなるか。

例えばサーバー側、AさんのPC、BさんのPC、にリポジトリがそれぞれあるとする

そして現時点では状態は同じとする

図に表すとこんな感じになる(〇はコミットを表す、上に行くほど新しい)

![スクリーンショット 2020-10-22 142737](https://user-images.githubusercontent.com/15999897/96828532-cd697580-1472-11eb-9985-54d6ed5be6b3.png)

この状態で、Aさんが新しいコミット'B'を作成した

![スクリーンショット 2020-10-22 142949](https://user-images.githubusercontent.com/15999897/96828689-102b4d80-1473-11eb-8437-740c03b51588.png)

するとAさんだけBに時間が進む

そしてAさんがそれをサーバーにプッシュした。

![スクリーンショット 2020-10-22 143220](https://user-images.githubusercontent.com/15999897/96828904-68fae600-1473-11eb-8d23-cbd85b3fde74.png)

そうするとBさんが昔に取り残されている。

ここでBさんがプルしてくれれば、コミットBを取り込むことができるけど、

Bさんが新しいコミット'B-2'を作成した。

![スクリーンショット 2020-10-22 143650](https://user-images.githubusercontent.com/15999897/96829188-09e9a100-1474-11eb-8cb1-e04f6f681200.png)

そうするとBさんだけ時代の流れが変わってしまった。

これをサーバー側にプッシュしようとすると時系列が衝突して変わるのでエラーが出る

こうなるとめちゃくちゃ厄介で、一度プルするも、conflict起きるわで、

そこで平行世界を作ってあげようってのがブランチ

![スクリーンショット 2020-10-22 150919](https://user-images.githubusercontent.com/15999897/96831785-a57d1080-1478-11eb-8e33-b253767b59f4.png)

各リポジトリにある真ん中の線はメインとなるブランチの世界線となる。

斜めに伸びているのが各自作れるブランチ、こうすることでメインで変更があったとしても平行世界は現状が保たれる。

これをサーバーにプッシュすると

![スクリーンショット 2020-10-22 151408](https://user-images.githubusercontent.com/15999897/96832166-4c61ac80-1479-11eb-88a7-b8d9118c55d5.png)

こういう感じで平行世界が作られる。

そしてこの平行世界は別のブランチとマージ(融合)が可能なので、最終的にメインのブランチに変更を与えることが可能。

基本的には各自、作業毎にブランチを作成し、プッシュ、そして完成したら、確認してからマージするという流れになる。

ブランチの作り方は

`git branch ブランチ名`

でブランチが作成される。

ただ、作成しただけではブランチが切り替わらないので

`git checkout ブランチ名`

で切り替えよう。

試しに自分の名前のブランチを作成しよう(ブランチ名は基本英数字と一部の記号のみ)

ちなみに`git branch -d ブランチ名`と `-d` オプションを付けることでブランチ作成と同時に切り替えることも可能。

ブランチを切り替えたらさっき作成した自分のフォルダに

`README.md`ファイルを作成して。中身を

	#自己紹介
	## 名前 自分の名前
	## 学籍番号 自分の学籍番号
	## ニックネーム 呼ばれたいニックネーム

と書き込んで保存し、

`git add ./各自名前/README.md`

`git commit -m 'readmeの追加'`

としてコミットしよう。

# ブランチをプッシュしよう

プッシュコマンド

最初にプッシュしたときは、

`git push origin master`

となっていた

`origin` は実はgithubのサーバーを指している。

そして `master` はデフォルトのブランチをさしている。

つまり今回は`master`を各自作成したブランチ名にしてあげればOK

だけどいちいちブランチ名を入力するのはめんどくさい。

そこで

`git push origin HEAD`

この`HEAD`は現在作業しているブランチに置き換わってくれる。

これで晴れてリモートのリポジトリに自分のブランチが作成できた。

# ファイルを変更しよう。

`git add` でファイルをリポジトリに追加できると言った。

実際にはちょっと違う。

`git add`は指定されたファイルの変更をコミットにステージングする機能をもつ。

もし、すでに`git add`されているファイルに何かを変更しても再度`git add`をしなければ変更はコミットに乗らない。

このコミットに乗せることをステージングという。

なんかしら変更がステージングされていないとコミットできないので注意。

試しに さっき作った`README.md`ファイルを

	#自己紹介
	## 名前 自分の名前
	## 学籍番号 自分の学籍番号
	## ニックネーム 呼ばれたいニックネーム
	## 一言 ひとこと

と、一言を追加して保存し、

`git commit -m "一言の追加"`

としてみよう。エラーが出るので。

`git add ./各自名前/README.md`

を実行すると変更がステージングされ、

その後コミットすることで、正しく変更がコミットできる。

コミットは変更の履歴を追えるのでなるべく細かくコミットしよう!

あとプッシュを忘れずに。

# プルリクエストを書こう

さっきブランチを分けたね、でも結局そっちで変更したものはメインのブランチは変更されない。

そこで別のブランチの変更を取り込むことができる。

それがマージ。

git管理ではメインブランチにマージするのは管理者が行います。

そこで、このブランチの作業が終わったからマージしてね!!っていうのを教えるのがプルリクエスト、

これはgitというよりgithubの機能なんだけどね。

https://github.com/NekomimiMofuMofu/Tutorial

このページから`Pull requests`を押すとプルリクエストの一覧が表示される

![スクリーンショット 2020-10-22 154952](https://user-images.githubusercontent.com/15999897/96835279-576b0b80-147e-11eb-8819-7502461c7e6e.png)

右上のNew pull requestを押すとプルリクエストの作成画面に移動できる。

![スクリーンショット 2020-10-22 155704](https://user-images.githubusercontent.com/15999897/96835945-41117f80-147f-11eb-9542-d87de8b81f97.png)

左上の `base` はマージ先のブランチ。基本的に `master`

その隣は自分が作業してたブランチ。各自作成したブランチを指定して。

あとは、タイトル、今回は適当にタイトルを付けて、

その下に内容を適当に書いてプルリクエストを作成してみよう。

皆のプルリクを確認次第masterにマージします。

# まとめ

基本的なgitの使い方は以上

大体は、タスクを細かく分けるので、そのタスク単位でブランチを作成、ブランチ内で各自細かくコミットし変更を記録、完成したらプルリクエストを作成。

プルリクエストの書き方は、通話とかで教えます。

あとマージは少々難しいので必要になったら教えるんだけど。。。

コマンド覚えるのめんどくせぇぇぇ

って絶対思ってるよね。

GUIでできるツールあります。

それは今度通話か、学校行ったとき教えます。